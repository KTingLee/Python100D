<!DOCTYPE html>
<html class='no-js' lang='en'>

<head>
    <meta charset='utf-8'>
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <title>管理員面板 - 選課系統</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet" type ="text/css"/>
    <script src="/js/jquery.min.js" type="text/javascript"></script>
    
    <style>
    </style>

</head>

<body>
    <%- include ("./include/user_template.ejs") %>

    <div class="col-lg-12">
        <div class="container-fluid">
            <table class="table" id="coursesTable">
                <tr>
                    <th style="width:100px;">課程代碼</th>
                    <th style="width:180px;">課程名稱</th>
                    <th style="width:100px;">課程日期</th>
                    <th style="width:120px;">開課教授</th>
                    <th style="width:150px;">限制年級</th>
                    <th style="width:100px;">剩餘人數</th>
                    <th >課程簡介</th>
                    <th></th>
                </tr>
            </table>
        </div>
    </div>

<script type="text/javascript">
    // 課程清單可透過 Ajax 接口獲得(路由: /coursesData)資料，再透過 jQuery 語法生成元素，並附加至課程表格中
    $.get("/coursesData", function(coursesData){
        // 遍歷 coursesData
        $.each(coursesData.rows, function(index, item){
            // 利用 jQuery 建立元素
            var $tr = $("<tr></tr>");

            $tr.append("<td>" + item.cid + "</td>");
            $tr.append("<td>" + item.Name + "</td>");
            $tr.append("<td>" + item.courseDay + "</td>");
            $tr.append("<td>" + item.teacher + "</td>");
            $tr.append("<td>" + item.allow + "</td>");
            $tr.append("<td>" + item.member + "</td>");
            $tr.append("<td>" + item.intro + "</td>");
            $tr.append("<td style='vertical-align: inherit;'><input type='button' class='btn btn-success' value='選課' ></td>");

            // 將最後結果附加至表格中
            $tr.appendTo($("#coursesTable"));
        })
    })
</script>

</body>
</html>