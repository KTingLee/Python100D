<!DOCTYPE html>
<html class='no-js' lang='en'>

<head>
    <meta charset='utf-8'>
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <title>管理員面板 - 選課系統</title>
    <%- include ("../include/includeFiles.ejs") %>
    <!-- 這邊引入 jqGrid 的 js 與 樣式表，記得要在 jQuery 之後引入 -->

<script src="/jqgrid/jquery.js" type="text/javascript"></script>
<script src="/jqgrid/jquery-ui-custom.min.js" type="text/javascript"></script>
<script src="/jqgrid/jquery.layout.js" type="text/javascript"></script>
<script src="/jqgrid/grid.locale-en.js" type="text/javascript"></script>
<script src="/jqgrid/ui.multiselect.js" type="text/javascript"></script>
<script src="/jqgrid/jquery.jqGrid.js" type="text/javascript"></script>
<script src="/jqgrid/jquery.tablednd.js" type="text/javascript"></script>
<script src="/jqgrid/jquery.contextmenu.js" type="text/javascript"></script>
<script type="text/javascript">
    $.jgrid.no_legacy_api = true;
    $.jgrid.useJSON = true;
</script>

<link rel="stylesheet" type="text/css" media="screen" href="/css/jquery-ui-custom.css" />
<link rel="stylesheet" type="text/css" media="screen" href="/css/ui.jqgrid.css" />
<link rel="stylesheet" type="text/css" media="screen" href="/css/ui.multiselect.css" />
</head>

<body class='main page'>
    <!-- Navbar -->
    <%- include ("../include/navBar.ejs") %>

    <div id='wrapper'>
        <!-- Sidebar -->
        <%- include ("../include/sidebar.ejs") %>
        
        <!-- Tools -->
        <section id='tools'>
            <ul class='breadcrumb' id='breadcrumb'>
                <li class='active'>學生清單</li>
                <li><a href="/admin/students/import">導入學生</a></li>
            </ul>
        </section>
        <!-- Content -->
        <div id='content'>
            <div class='panel panel-default'>
                <div class='panel-heading'>
                    <i class='icon-beer icon-large'></i>
                    所有學生清單
                </div>
                <div class='panel-body'>
                    <!-- 放置學生清單表格，使用 jqGrid 顯示之，所以要依照 jqGrid 的用法，在後面會以 jQuery 語法插入清單 -->
                    <table id='studentsTable'></table>
                    <!-- 分頁清單(jqGrid能夠自帶分頁設置，這邊可以設定每頁資料數) -->
                    <div id='pageNav'></div>

                </div>
            </div>
        </div>
    </div>
</body>

<script>
    $(function(){
        pageInit();
    });

    var lastsel;

    function pageInit(){
        jQuery("#studentsTable").jqGrid(
                {
                    url : '/admin/students/export',
                    datatype : "json",
                    colNames : [ '學號', '姓名', '年級', '密碼', '是否為初始密碼'],
                    colModel : [ 
                                 {name : 'stu_id',       width : 55, editable:true},
                                 {name : 'Name',         width : 90, editable:true},
                                 {name : 'grade',        width : 90, editable:true, edittype : "select",
                                          editoptions : {value : "1:國一;2:國二;3:國三;4:高一;5:高二;6:高三"}},
                                 {name : 'password',     width : 100, editable:true},
                                 {name : 'initpassword', width : 80,align : "right", editable:true}
                               ],
                    rowNum : 10,
                    rowList : [ 10, 20, 30 ],
                    pager : '#pageNav',
                    sortname : 'stu_id',
                    viewrecords : true,
                    sortorder : "desc",
                    caption : "Data Optimization",
                    loadonce: true,
                    height : 210,
                    autowidth  : true,
                    cellEdit : true
                });
        jQuery("#studentsTable").jqGrid('navGrid', '#pageNav', {edit : false,add : false,del : false});
        jQuery("#studentsTable").jqGrid('inlineNav', "#pageNav");
    }
</script>

</html>